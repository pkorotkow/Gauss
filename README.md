# Руководство пользователя программы для генерации и анализа гауссов

## Описание программы
Эта программа позволяет:
1. Генерировать двумерные гауссовые функции.
2. Выполнять срезы по заданной высоте и анализировать компоненты.
3. Создавать визуализации с помощью файлов GNU Plot и BMP.
4. Выполнять алгоритмы кластеризации (KMeans) и обработки изображения ("волна").
5. Чтение и запись команд через batch-файл или интерактивную консоль.

## Конфигурация программы
Для работы программы используется файл **config.txt**. Его параметры задают начальные настройки программы:

### Пример config.txt:
```
Log_Server = ON                       # Включение/выключение логов сервера
Log_Server_filename = log_server.txt # Имя файла для логов сервера
Log_Client = ON                       # Включение/выключение клиентских логов
Log_Client_filename = log_client.txt # Имя файла для логов клиента
Batch_pause = OFF                     # Ожидание Enter после каждой команды
Batch_file = ON                       # Использование batch-файла для команд (Не выключать!!!)
Batch_filename = Batch120.txt         # Имя batch-файла
Field_DEF = 120 100                   # Размер поля по умолчанию
Gauss_DEF = 150 50 50 10 10           # Гаусс по умолчанию
Noize = 11                            # Порог количества пикселей для компоненты
```

## Использование batch-файла
Batch-файл содержит команды, которые программа выполняет последовательно.
К программе приложены для удобства три Batch-файла, можете использовать их при работе с программой
Вот небольшое описание того, что делает каждый batch-файл
1. Batch7.txt 
Создает поле размером 100 на 100, добавляет 7 гауссов на него, делает срез на высоте 10,
создает файл с информацией для гнуплота под названием gnuplot_plot1.txt, делает получившуюся bmp-картинку
под названием bmp2.bmp, запускает алгоритм WAVE, запускает 

### Описание команд batch-файла:
- **INI X Y**: Инициализация поля размером X на Y.
- **G A B C D E**: Добавление гаусса с параметрами:
  - A: высота (амплитуда),
  - B, C: координаты центра (X, Y),
  - D, E: стандартные отклонения (sigma_x, sigma_y).
- **GEN**: Генерация поля с добавленными гауссами.
- **BIN H**: Выполнение среза по высоте H.
- **GNU plot**: Создание визуализации в формате GNU Plot (файл называется plot.txt).
- **BMP filename.bmp**: Создание визуализации в формате BMP.
- **WAVE**: Запуск алгоритма "волна" для анализа среза. Итог - выделенные компоненты.
- **KMEANS K P**: Кластеризация KMeans с K ядрами и P точками в ядре.
- **RBMP filename.bmp**: Чтение изображения BMP из файла.

## Пошаговая инструкция по работе:
1. Создайте и настройте **config.txt**, указав параметры логирования, работу с batch-файлом и другие настройки.
2. Если используете batch-файл, создайте его и заполните командами, как показано выше. Если не хотите придумывать batch-файл самостоятельно, можете взять один из готовых, приложенных к письму. Не забудьте в конфиге написать соответствующее название!
3. Запустите программу. Она попросит ввести имя конфигурационного файла (например, `config.txt`).
4. Программа выполнит команды из batch-файла или предложит вводить команды вручную.
5. После выполнения команд в папке программы появятся файлы результатов (например, `plot.txt`, `bmp2.bmp` и др.).

## Работа в интерактивном режиме (В данной программе пока недоступно! Работайте через batch-file!)

Если batch-файл отключен (Batch_file = OFF), команды можно вводить вручную через консоль. Вводите команды по одной, например:
```
INI 100 100
G 50 50 50 10 10
GEN
BIN 10
```

## Результаты работы
Программа создаёт следующие файлы:
- **log_server.txt** и **log_client.txt**: Логи выполнения программы.
- **plot.txt**: Данные для построения графика в GNU Plot.
- **bmp-файлы**: Изображения в формате BMP.
- **wave-результаты**: Картинки компонентов, выделенных алгоритмом "волна".
- **kmeans-результаты**: Картинки кластеризации методом KMeans.

## Возможные ошибки и их устранение
1. **Ошибка открытия файла**: Убедитесь, что указаны правильные пути и имена файлов в `config.txt`.
2. **Поле не инициализировано**: Добавьте команду `INI X Y` в batch-файл или введите её вручную.
3. **Нет гауссов для генерации**: Убедитесь, что вы добавили команды `G` перед `GEN` или используйте `Gauss_DEF` в `config.txt`.

Если проблема не решена, проверьте логи для диагностики.

## Дополнительная информация
- Алгоритм "волна" ищет связные компоненты после среза. Компоненты с числом пикселей <= `Noize` игнорируются.
- Кластеризация KMeans помогает найти центры тяжести для компонентов на срезе.
- Не пишите INI два раза подряд
- Команду GEN писать только после того, как написали все гауссы (то есть после GEN не должны быть G)
- Чтобы посмотреть картинку в гнуплот, напишите "gnuplot gnuplot_commands.txt"!

Программа разработана студентом Коротковым Павлом (212 группа).
